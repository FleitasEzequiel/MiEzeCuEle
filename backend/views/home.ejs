<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiEzeCuEle</title>
</head>
<body style="padding: 0; margin: 0; display: flex; flex-direction: row;">
    <div style="display: flex;background-color: rgb(108, 102, 102); width: 20%;min-height: 100vh; flex-direction: column;">
        <h1>MiEzeCuEle</h1>
        <div style="display: flexbox;">
            <% for (var i = 0; i < info.dbs.length; i++) { %>
                <div onchange="alert('hola')" class="closed">
                    <h3><%=info.dbs[i].database%></h3>
                    <ul >
                        <% for (var j = 0; j < info.dbs[i].tables.length; j++) { %>
                            <li><%=info.dbs[i].tables[j]%></li>                        
                            <% } %>
                        </ul>
                    </div>
              <% } %>
        </div>
    </div>
    <main style="display:inline-flex; width: 100%; flex-direction: column;">
        <div style="display:grid; grid-template-rows: 20% 60% 20%;width: 100%; height:100%;">
            <div>
                <form   method="post">
                    <input type="text" name="query" placeholder="Escribir consulta acÃ¡...">
                    <button>Query</button>
                </form>
            </div>
            <div>
                <% console.log(info.result)%>
                <% if (info.result.length > 0) {%>
                    <table>
                        <tr style="background-color: antiquewhite;">
                            <% for (var i = 0; i < info.result[1].length; i++) { %>
                                <th><%=info.result[1][i].name%></th>
                              <% } %>
                        </tr>
                        <% for (var i = 0; i < info.result[0].length; i++) { %>
                            <tr>
                                <td><%=Object.values(info.result[0][i])[0]  %></td>
                            </tr>
                          <% } %>
                    </table>
                    <%}%>

            </div>
        </div>
    </main>
</body>

<style>
    body{
        background-color: rgb(177, 166, 166)
    }
</style>
<script>


    const renderClose = () =>{
        const closed = document.querySelectorAll(".closed>ul>li")
        
        const closednt = document.querySelectorAll("ul>li")
        const dbs = document.querySelectorAll(".closed")

        for (const key in closed) {
            if (Object.prototype.hasOwnProperty.call(closed, key)) {
                const element = closed[key];
                element.setAttribute("hidden",true)
            }
        }
    }

    const render = () =>{
        renderClose()
    }
    render()
</script>
</html>